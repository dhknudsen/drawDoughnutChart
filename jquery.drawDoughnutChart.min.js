!function(a,b){a.fn.drawDoughnutChart=function(b,c){function G(a,b){var c=-1.57,e=4.7131,f=g+i(c)*a,k=h+j(c)*a,l=g+i(c)*b,m=h+j(c)*b,n=g+i(e)*a,o=h+j(e)*a,p=g+i(e)*b,q=h+j(e)*b,r=["M",f,k,"A",a,a,0,1,1,n,o,"Z","M",p,q,"A",b,b,0,1,0,l,m,"Z"];return r=r.join(" ")}function H(c){var d=a(this).data().order;if(l.showTip&&x.text(b[d].title+": "+b[d].value).fadeIn(200),l.showLabel){C.text(b[d].title).css("font-size",U(C,b[d].title));var e=l.shortInt?T(b[d].value):b[d].value;D.html(e).css("font-size",U(D,e))}l.onPathEnter.apply(a(this),[c,b])}function I(c){if(l.showTip&&x.hide(),l.showLabel){C.text(l.summaryTitle).css("font-size",U(C,l.summaryTitle));var d=l.shortInt?T(t):t;D.html(d).css("font-size",U(D,d))}l.onPathLeave.apply(a(this),[c,b])}function J(a){l.showTip&&x.css({top:a.pageY+l.tipOffsetY,left:a.pageX-x.width()/2+l.tipOffsetX})}function K(c){var d=a(this).data().order;"undefined"!=typeof b[d].action&&b[d].action()}function L(a){var c=-k/2,d=1;if(l.animation&&l.animateRotate&&(d=a),"default"===l.summarySource?M(a,t):M(a,b[l.summarySource].value),w.attr("opacity",a),1===b.length&&4.7122<d*(b[0].value/t*(2*k))+c)return void p[0].attr("d",G(r,s));for(var e=0,f=b.length;f>e;e++){var m=d*(b[e].value/t*(2*k)),n=c+m,o=(n-c)%(2*k)>k?1:0,q=g+i(c)*r,u=h+j(c)*r,v=g+i(c)*s,x=h+j(c)*s,y=g+i(n)*r,z=h+j(n)*r,A=g+i(n)*s,B=h+j(n)*s,C=["M",q,u,"A",r,r,0,o,1,y,z,"L",A,B,"A",s,s,0,o,0,v,x,"Z"];p[e].attr("d",C.join(" ")),c+=m}}function M(a,b){var c=(b*a).toFixed(1);D.css({opacity:a}).text((b*a).toFixed(1));var d=l.shortInt?T(c):c;D.html(d).css("font-size",U(D,d))}function N(a,b){var c=l.animation?S(q(a),null,0):1;b(c)}function O(a){var b=l.animation?1/S(l.animationSteps,Number.MAX_VALUE,1):1,c=l.animation?0:1;n(function(){c+=b,N(c,a),1>=c?n(arguments.callee):l.afterDrawed.call(d)})}function Q(a){return Math.min.apply(null,a)}function R(a){return!isNaN(parseFloat(a))&&isFinite(a)}function S(a,b,c){return R(b)&&a>b?b:R(c)&&c>a?c:a}function T(a){a=a.toString();var b=a.length;return 5>b?a:8>b?'<span title="'+a+'">'+a.substring(0,b-3)+"K</span>":'<span title="'+a+'">'+a.substring(0,b-6)+"M</span>"}function U(a,b){a.css("font-size",""),b=b.toString().replace(/(<([^>]+)>)/gi,"");var c=a.width()/b.length*l.ratioFont,d=a.width()-b.length*a.css("font-size").replace(/px/,"")/l.ratioFont;return 0>d?c+"px":""}var d=this,e=d.width(),f=d.height(),g=e/2,h=f/2,i=Math.cos,j=Math.sin,k=Math.PI,l=a.extend({segmentShowStroke:!0,segmentStrokeColor:"#0C1013",segmentStrokeWidth:1,baseColor:"rgba(0,0,0,0.5)",baseOffset:4,edgeOffset:10,percentageInnerCutout:75,animation:!0,animationSteps:90,animationEasing:"easeInOutExpo",animateRotate:!0,tipOffsetX:-8,tipOffsetY:-45,showTip:!0,showLabel:!1,ratioFont:1.5,shortInt:!1,tipClass:"doughnutTip",summarySource:"default",summaryClass:"doughnutSummary",summaryTitle:"TOTAL:",summaryTitleClass:"doughnutSummaryTitle",summaryNumberClass:"doughnutSummaryNumber",beforeDraw:function(){},afterDrawed:function(){},onPathEnter:function(a,b){},onPathLeave:function(a,b){}},c),m={linear:function(a){return a},easeInOutExpo:function(a){var b=.5>a?8*a*a*a*a:1-8*--a*a*a*a;return b>1?1:b}},n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();l.beforeDraw.call(d);var o=a('<svg width="'+e+'" height="'+f+'" viewBox="0 0 '+e+" "+f+'" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"></svg>').appendTo(d),p=[],q=m[l.animationEasing],r=Q([f/2,e/2])-l.edgeOffset,s=r*(l.percentageInnerCutout/100),t=0,u=r+l.baseOffset,v=s-l.baseOffset;a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({d:G(u,v),fill:l.baseColor}).appendTo(o);var w=a(document.createElementNS("http://www.w3.org/2000/svg","g"));if(w.attr({opacity:0}).appendTo(o),l.showTip){var x=a('<div class="'+l.tipClass+'" />').appendTo("body").hide();x.width(),x.height()}var A=2*(s-(r-s)),B=a('<div class="'+l.summaryClass+'" />').appendTo(d).css({width:A+"px",height:A+"px","margin-left":-(A/2)+"px","margin-top":-(A/2)+"px"}),C=a('<p class="'+l.summaryTitleClass+'">'+l.summaryTitle+"</p>").appendTo(B);C.css("font-size",U(C,l.summaryTitle));for(var D=a('<p class="'+l.summaryNumberClass+'"></p>').appendTo(B).css({opacity:0}),E=0,F=b.length;F>E;E++)t+=b[E].value,p[E]=a(document.createElementNS("http://www.w3.org/2000/svg","path")).attr({"stroke-width":l.segmentStrokeWidth,stroke:l.segmentStrokeColor,fill:b[E].color,"data-order":E}).appendTo(w).on("mouseenter",H).on("mouseleave",I).on("mousemove",J).on("click",K);return O(L),d}}(jQuery);